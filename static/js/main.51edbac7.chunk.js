(this.webpackJsonpreactcanvas=this.webpackJsonpreactcanvas||[]).push([[0],{139:function(e,t,n){},140:function(e,t,n){},154:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),c=n(37),r=n.n(c),s=(n(139),n(140),n(60)),o=n(13),l=n(42),d=n(14),h=n(214),u=n(223),j=n(232),b=n(215),f=n(233),m=n(229),p=n(230),g=n(231),O=n(61),x=n(222),v=n(111),w=n(228),S=n(109),F=n.n(S),y=n(108),N=n.n(y),E=n(234),W=n(224),k=n(104),C=n.n(k),T=n(103),M=n.n(T),D=n(105),A=n.n(D),P=n(2),I=function(e){var t=e.drawTool,n=e.setDrawTool;return Object(P.jsxs)(W.a,{value:t,exclusive:!0,onChange:function(e,t){n(t)},children:[Object(P.jsx)(E.a,{value:"line",children:Object(P.jsx)(M.a,{})}),Object(P.jsx)(E.a,{value:"circle",children:Object(P.jsx)(C.a,{})}),Object(P.jsx)(E.a,{value:"tag",children:Object(P.jsx)(A.a,{})})]})},L=n(237),_=n(219),B=n(207),H=n(238),R=n(235),z=n(236),J=n(249),Y=n(225),U=n(106),X=n.n(U),q=Object(h.a)({list:{}});var G=function(e){var t=e.items,n=e.setItems,a=q();return Object(P.jsx)(P.Fragment,{children:Object(P.jsxs)(R.a,{sx:{maxWidth:345},children:[Object(P.jsx)(z.a,{children:Object(P.jsx)(L.a,{className:a.list,subheader:Object(P.jsx)(H.a,{component:"div",children:"Navigation items"}),children:t.map((function(e){return Object(P.jsx)(_.a,{secondaryAction:Object(P.jsx)(w.a,{onClick:function(){return a=e,void n(t.filter((function(e){return e!==a})));var a},children:Object(P.jsx)(X.a,{})}),children:Object(P.jsx)(B.a,{primary:e.description})},e.id)}))})}),Object(P.jsx)(J.a,{children:Object(P.jsx)(Y.a,{size:"small",color:"primary",onClick:function(){n([])},children:"Clear"})})]})})},K=n(16),V=n(242),Q=n(239),Z=n(245),$=n(240),ee=n(241),te=n(211),ne=1,ae=function(){return ne++},ie=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"],ce=["N","NbE","NNE","NEbN","NE","NEbE","ENE","EbN","E","EbS","ESE","SEbE","SE","SEbS","SSE","SbE","S","SbW","SSW","SWbS","SW","SWbW","WSW","WbS","W","WbN","WNW","NWbW","NW","NWbN","NNW","NbW"],re="16",se="32",oe={inProgress:{line1:{width:5,stroke:"#00000033",dash:[15,5]},line2:{width:5,stroke:"#FFFFFFDD",dash:[15,5]},showLength:!0,showDirection:!0},default:{line1:{width:5,stroke:"#00000033",dash:[]},line2:{width:5,stroke:"#FFFFFFDD",dash:[]},showLength:!0,showDirection:!1}},le={inProgress:{line1:{width:5,stroke:"#00000033",dash:[15,5]},line2:{width:5,stroke:"#FFFFFFDD",dash:[15,5]},showLength:!0},default:{line1:{width:5,stroke:"#00000033",dash:[]},line2:{width:5,stroke:"#FFFFFFDD",dash:[]},showLength:!0}},de=function(e,t,n,a){return{id:ae(),description:fe(e,t,n,a),type:"line",start:t,end:n,style:oe.default}},he=function(e,t,n,a){return{id:ae(),description:me(e,t,n,a),type:"circle",start:t,end:n,style:le.default}},ue=function(e,t,n){var a=t[0]-e[0],i=t[1]-e[1],c=Math.round(Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))),r="",s="";if(c>1){var o=a/c,l=(360+Math.round(360*Math.asin(o)/(2*Math.PI)))%360;isNaN(l)?l=t[0]>e[0]?90:270:e[0]<t[0]&&e[1]<t[1]?l=180-l:e[0]>=t[0]&&e[1]<t[1]&&(l=270-(l-270));var d=((l%=360)+180)%360;r=l+"\xb0 ("+be(l,n.compass)+")",s=d+"\xb0 ("+be(d,n.compass)+")"}return{dx:a,dy:i,length:c,mid:[e[0]+Math.round(a/2),e[1]+Math.round(i/2)],angleText:r,reciprocalAngleText:s}},je=function(e,t,n){e.font="16px Arial";var a=e.measureText(n);e.fillStyle="#00000066",e.fillRect(t[0]-a.width/2-5,t[1]-18,a.width+10,26),e.fillStyle="#FFFFFFDD",e.fillText(n,t[0]-a.width/2,t[1])},be=function(e,t){if(t===re){e=(e+11.25)%360;var n=Math.floor(e/22.5);return ie[n]}if(t===se){e=(e+5.625)%360;var a=Math.floor(e/11.25);return ce[a]}return""},fe=function(e,t,n,a){var i=ue(t,n,a),c=i.length,r=i.angleText;return"".concat(Math.round(c*e.scale)," nm line at ").concat(r)},me=function(e,t,n,a){var i=ue(t,n,a).length;return"".concat(Math.round(i*e.scale)," nm circle")},pe=function(e,t){e.lineWidth=t.width,e.strokeStyle=t.stroke,e.setLineDash(t.dash)},ge=function(e,t,n,a,i,c){var r=ue(n,a,c),s=r.length,o=r.mid,l=r.angleText,d=r.reciprocalAngleText;i.line1&&(pe(e,i.line1),e.beginPath(),e.moveTo(n[0],n[1]),e.lineTo(a[0],a[1]),e.stroke()),i.line2&&(pe(e,i.line2),e.beginPath(),e.moveTo(n[0],n[1]),e.lineTo(a[0],a[1]),e.stroke()),s>40&&i.showDirection&&(je(e,[n[0]+20,n[1]+20],d),je(e,[a[0]+40,a[1]+40],l)),i.showLength&&je(e,o,Math.round(s*t.scale)+" nm")},Oe=function(e,t,n,a,i,c){var r=ue(n,a,c).length;pe(e,i.line1),e.beginPath(),e.arc(n[0],n[1],r,0,2*Math.PI),e.stroke(),pe(e,i.line2),e.beginPath(),e.arc(n[0],n[1],r,0,2*Math.PI),e.stroke(),ge(e,t,n,a,i,c)},xe=function(e,t,n){je(e,[t[0]+20,t[1]+20],n)},ve=function(e,t,n,a,i,c,r){e&&(e.clearRect(0,0,e.canvas.width,e.canvas.height),e.drawImage(t.image,0,0,t.naturalWidth,t.naturalHeight,0,0,t.scaledWidth,t.scaledHeight),a&&function(e,t){e.lineWidth=2,e.strokeStyle="#FFFFFF33",e.setLineDash([1]),e.beginPath(),e.moveTo(0,t[1]),e.lineTo(1e3,t[1]),e.moveTo(t[0],0),e.lineTo(t[0],1e3),e.stroke()}(e,a),n&&a&&("line"===c?ge(e,t,n,a,oe.inProgress,r):"circle"===c&&Oe(e,t,n,a,le.inProgress,r)),function(e,t,n,a){if(n){var i,c=Object(l.a)(n);try{for(c.s();!(i=c.n()).done;){var r=i.value;"line"===r.type?ge(e,t,r.start,r.end,r.style,a):"circle"===r.type?Oe(e,t,r.start,r.end,r.style,a):"tag"===r.type&&xe(e,r.location,r.text)}}catch(s){c.e(s)}finally{c.f()}}}(e,t,i,r))},we=Object(h.a)({root:{},canvas:{maxWidth:"100%"}}),Se=function(e,t){return[].concat(Object(K.a)(e),[t])},Fe=function(e,t){if(!e)return t;var n=e.getBoundingClientRect(),a=e.width/n.width,i=e.height/n.height;return[parseFloat((t[0]*a).toFixed(3)),parseFloat((t[1]*i).toFixed(3))]};var ye=function(e){var t=e.drawTool,n=e.map,i=e.items,c=e.setItems,r=e.settings,s=we(),l=Object(a.useRef)(null),d=Object(a.useState)(null),h=Object(o.a)(d,2),u=h[0],j=h[1],b=Object(a.useState)(null),f=Object(o.a)(b,2),m=f[0],p=f[1],g=Object(a.useState)(null),O=Object(o.a)(g,2),x=O[0],v=O[1],w=Object(a.useState)(!1),S=Object(o.a)(w,2),F=S[0],y=S[1],N=Object(a.useState)(null),E=Object(o.a)(N,2),W=E[0],k=E[1],C=Object(a.useState)(""),T=Object(o.a)(C,2),M=T[0],D=T[1],A=function(e,a,i){ve(m,n,e,a,i,t,r)};Object(a.useEffect)((function(){A(null,null,i)}),[n,i,u,m]),Object(a.useEffect)((function(){setTimeout((function(){j(l.current),p(l.current.getContext("2d"))}),200)}),[]);var I=function(){y(!1)};return Object(P.jsxs)("div",{className:s.root,children:[Object(P.jsx)("canvas",{ref:l,width:1e3,height:1e3,onClick:function(e){var a=Fe(u,[e.nativeEvent.offsetX,e.nativeEvent.offsetY]);if("tag"===t)return k(a),void y(!0);var s=x?null:a,o=x?Se(i,function(e,t,n,a,i){return"line"===t?de(e,n,a,i):"circle"===t?he(e,n,a,i):void 0}(n,t,x,a,r)):i;v(s),o!==i&&c(o),u&&A(s,a,o)},onMouseMove:function(e){var t=Fe(u,[e.nativeEvent.offsetX,e.nativeEvent.offsetY]);u&&A(x,t,i)},onMouseLeave:function(){A(null,null,i)},className:s.canvas}),Object(P.jsxs)(Q.a,{open:F,onClose:I,children:[Object(P.jsx)(te.a,{children:"Add tag"}),Object(P.jsxs)($.a,{children:[Object(P.jsx)(ee.a,{children:"Type in the text for the tag you would like to appear on the map:"}),Object(P.jsx)(V.a,{autoFocus:!0,margin:"dense",id:"text",label:"Tag text",type:"text",fullWidth:!0,variant:"standard",value:M,onChange:function(e){D(e.target.value)},inputProps:{autoComplete:"off"}})]}),Object(P.jsxs)(Z.a,{children:[Object(P.jsx)(Y.a,{onClick:I,children:"Cancel"}),Object(P.jsx)(Y.a,{onClick:function(){var e,t,n=(e=W,t=M,{id:ae(),description:'Tag "'.concat(t.substring(0,20)).concat(t.length>20?"...":"",'"'),type:"tag",location:e,text:t});c(Se(i,n)),y(!1),D("")},disabled:!M||0===M.trim().length,children:"Add"})]})]})]})},Ne=n.p+"static/media/map_final_al_ankh.70de4685.jpg",Ee=n.p+"static/media/map_final_emerald_archipelago.2f524505.jpg",We=n.p+"static/media/map_final_aestrin.9651b847.jpg",ke=n.p+"static/media/map_final_ocean.917e93d6.jpg",Ce=[],Te=function(e,t){var n=new Image;return n.src=t,n.onload=function(){var t=n.naturalWidth,a=1;t>1e3&&(a=1e3/t);var i=n.naturalHeight,c=1;i>1e3&&(c=1e3/i);var r=Math.min(a,c);r<1&&(t*=r,i*=r);var s=Ce.find((function(t){return t.name===e}));s.naturalWidth=n.naturalWidth,s.naturalHeight=n.naturalHeight,s.scaledWidth=t,s.scaledHeight=i},n},Me=function(e,t,n){return{name:e,image:Te(e,t),scale:n,items:[]}};Ce.push(Me("Al'Ankh",Ne,84/850)),Ce.push(Me("Emerald Archipelago",Ee,111/920)),Ce.push(Me("Aestrin",We,60/585)),Ce.push(Me("Ocean",ke,891/846));var De=Ce,Ae=n(86),Pe=n.n(Ae),Ie=n(246),Le=n(213),_e=Object(h.a)({paragraph:{paddingTop:16}}),Be=function(e){var t=e.open,n=e.handleClose,a=_e();return Object(P.jsx)(P.Fragment,{children:Object(P.jsxs)(Q.a,{open:t,onClose:n,children:[Object(P.jsx)(te.a,{children:"About Sailwind Navigation Companion"}),Object(P.jsx)($.a,{children:Object(P.jsxs)(ee.a,{component:"div",children:[Object(P.jsxs)(O.a,{variant:"body1",component:"div",children:["A simple companion utility for the game ",Object(P.jsx)(Ie.a,{href:"https://store.steampowered.com/app/1764530/Sailwind/",underline:"hover",target:"_blank",rel:"noreferrer",children:"Sailwind"}),"."]}),Object(P.jsxs)(O.a,{variant:"body1",component:"div",className:a.paragraph,children:["This app is made by Eurotrash. For bug reports, feature suggestions, or general feedback, please PM me on the ",Object(P.jsx)(Ie.a,{href:"https://discord.gg/HM3TadVv3e",underline:"hover",target:"_blank",rel:"noreferrer",children:"Sailwind Community Discord"}),"."]}),Object(P.jsx)(Le.a,{className:a.paragraph}),Object(P.jsx)(O.a,{variant:"body2",component:"div",className:a.paragraph,children:"What is this app for? You can use it to work out your position via triangulation, to measure various distances, to estimate visible range of islands via the circle tool, to keep track of your longer journeys via the tags / notes, or just to look at the game's maps in general."})]})}),Object(P.jsx)(Z.a,{children:Object(P.jsx)(Y.a,{onClick:n,autoFocus:!0,children:"OK"})})]})})},He=n(220),Re=n(243),ze=n(218),Je=n(244),Ye=function(e){var t=e.open,n=e.handleClose,c=e.handleAccept,r=e.settings,s=r.compass,l=i.a.useState(s),d=Object(o.a)(l,2),h=d[0],u=d[1];Object(a.useEffect)((function(){u(r.compass)}),[r]);return Object(P.jsx)(P.Fragment,{children:Object(P.jsx)(m.a,{sx:{minWidth:220},children:Object(P.jsxs)(Q.a,{open:t,onClose:n,children:[Object(P.jsx)(te.a,{children:"Settings"}),Object(P.jsx)($.a,{style:{width:400},children:Object(P.jsxs)(Re.a,{fullWidth:!0,style:{marginTop:8},children:[Object(P.jsx)(He.a,{id:"compass-label",children:"Compass / heading format"}),Object(P.jsxs)(ze.a,{labelId:"compass-label",id:"compass-select",value:h,label:"Compass / heading format",onChange:function(e){u(e.target.value)},children:[Object(P.jsx)(x.a,{value:"16",children:"16-wind compass"}),Object(P.jsx)(x.a,{value:"32",children:"32-wind compass"})]}),Object(P.jsx)(Je.a,{style:{marginLeft:0},children:"(will only affect new items)"})]})}),Object(P.jsxs)(Z.a,{children:[Object(P.jsx)(Y.a,{onClick:n,children:"Cancel"}),Object(P.jsx)(Y.a,{onClick:function(){return c({compass:h})},children:"Accept"})]})]})})})},Ue=Object(h.a)({container:{paddingTop:64}});var Xe=function(){var e=Ue(),t=Object(d.f)(),n=Object(a.useState)(function(){var e,t={isDefault:!0,settings:{compass:"16"},maps:{}},n=Object(l.a)(De);try{for(n.s();!(e=n.n()).done;){var a=e.value;t.maps[a.name]=[]}}catch(i){n.e(i)}finally{n.f()}return t}()),c=Object(o.a)(n,2),r=c[0],h=c[1],S=Object(a.useState)("line"),y=Object(o.a)(S,2),E=y[0],W=y[1],k=function(e,t){var n=window.location.search,a=new URLSearchParams(n);if(!n||n.length<3||!a.get("map"))return{mapName:"Al'Ankh",data:null,tabIndex:0,state:null};var i=a.get("map"),c=a.get("data");return{mapName:i,tabIndex:De.findIndex((function(e){return e.name===i})),data:c,state:t}}(Object(d.g)()["*"],r),C=k.tabIndex,T=i.a.useState(null),M=Object(o.a)(T,2),D=M[0],A=M[1],L=i.a.useState(!1),_=Object(o.a)(L,2),B=_[0],H=_[1],R=i.a.useState(!1),z=Object(o.a)(R,2),J=z[0],Y=z[1],U=function(){A(null)};Object(a.useEffect)((function(){k.data&&k.data.trim().length>0&&Pe.a.loadAsync(k.data,{base64:!0}).then((function(e){e.files["state.json"].async("string").then((function(e){var t=JSON.parse(e),n=0;for(var a in t.maps){var i,c=t.maps[a],r=Object(l.a)(c);try{for(r.s();!(i=r.n()).done;){var o=i.value;o.id>n&&(n=o.id)}}catch(d){r.e(d)}finally{r.f()}}ne=n+1,t.settings=Object(s.a)(Object(s.a)({},{compass:"16"}),t.settings||{}),h(t)}))}))}),[]);var X=function(e,n){t(n?"?map=".concat(e,"&data=").concat(encodeURIComponent(n)):"?map=".concat(e))},q=function(e){var t=0;for(var n in e.maps)t+=e.maps[n].length;if(0===t&&function(e){var t={compass:"16"};for(var n in e)if(e.hasOwnProperty(n)&&e[n]!==t[n])return!1;return!0}(e.settings))X(De[C].name);else{var a=new Pe.a;a.file("state.json",JSON.stringify(e)),a.generateAsync({type:"base64",compression:"DEFLATE",compressionOptions:{level:9}}).then((function(e){X(De[C].name,e)}))}},K=r.maps[k.mapName],V=function(e){var t=Object(s.a)({},r);t.maps[k.mapName]=e,t.isDefault=!1,h(t),q(t)};return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)("header",{children:Object(P.jsx)(p.a,{children:Object(P.jsxs)(g.a,{children:[Object(P.jsx)(w.a,{edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2},children:Object(P.jsx)(N.a,{})}),Object(P.jsx)(O.a,{variant:"body1",component:"div",sx:{flexGrow:1},children:"Sailwind Navigation Companion"}),Object(P.jsx)(w.a,{size:"large",edge:"end",color:"inherit","aria-label":"menu",sx:{mr:2},onClick:function(e){A(e.currentTarget)},children:Object(P.jsx)(F.a,{})}),Object(P.jsxs)(v.a,{id:"menu-appbar",anchorEl:D,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(D),onClose:U,children:[Object(P.jsx)(x.a,{onClick:function(){U(),H(!0)},children:"About"}),Object(P.jsx)(x.a,{onClick:function(){U(),Y(!0)},children:"Settings"})]})]})})}),Object(P.jsxs)(j.a,{className:e.container,children:[Object(P.jsx)(m.a,{sx:{borderBottom:1,borderColor:"divider",marginBottom:1},children:Object(P.jsx)(b.a,{value:C,onChange:function(e,t){X(De[t].name,k.data)},children:De.map((function(e){return Object(P.jsx)(f.a,{label:e.name},e.name)}))})}),Object(P.jsx)(m.a,{sx:{marginBottom:1},children:Object(P.jsx)(I,{drawTool:E,setDrawTool:W})}),Object(P.jsxs)(u.a,{container:!0,spacing:1,children:[Object(P.jsx)(u.a,{item:!0,xs:8,children:Object(P.jsx)(ye,{drawTool:E,items:K,setItems:V,settings:r.settings,map:De[C]})}),Object(P.jsx)(u.a,{item:!0,xs:4,children:Object(P.jsx)(G,{items:K,setItems:V})})]})]}),Object(P.jsx)(Be,{open:B,handleClose:function(){return H(!1)}}),Object(P.jsx)(Ye,{open:J,handleClose:function(){return Y(!1)},handleAccept:function(e){Y(!1);var t=Object(s.a)({},r);t.settings=e,t.isDefault=!1,h(t),q(t)},settings:r.settings})]})},qe=n(81);var Ge=function(){return Object(P.jsx)("div",{style:{width:"100%",height:"100%"},children:Object(P.jsx)(qe.a,{basename:"/sailwind-companion",children:Object(P.jsx)(d.c,{children:Object(P.jsx)(d.a,{index:!0,path:"*",element:Object(P.jsx)(Xe,{})})})})})},Ke=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,252)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),i(e),c(e),r(e)}))};r.a.render(Object(P.jsx)(i.a.StrictMode,{children:Object(P.jsx)(Ge,{})}),document.getElementById("root")),Ke()}},[[154,1,2]]]);
//# sourceMappingURL=main.51edbac7.chunk.js.map