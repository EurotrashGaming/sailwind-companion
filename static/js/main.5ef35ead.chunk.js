(this.webpackJsonpreactcanvas=this.webpackJsonpreactcanvas||[]).push([[0],{113:function(e,t,n){},114:function(e,t,n){},128:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),c=n(34),r=n.n(c),s=(n(113),n(114),n(83)),o=n(13),l=n(39),d=n(14),h=n(199),u=n(205),j=n(212),f=n(200),b=n(214),m=n(213),v=n(210),g=n(211),O=n(209),p=n(92),x=n.n(p),F=n(215),w=n(206),y=n(89),T=n.n(y),k=n(88),S=n.n(k),M=n(90),D=n.n(M),N=n(2),C=function(e){var t=e.drawTool,n=e.setDrawTool;return Object(N.jsxs)(w.a,{value:t,exclusive:!0,onChange:function(e,t){n(t)},children:[Object(N.jsx)(F.a,{value:"line",children:Object(N.jsx)(S.a,{})}),Object(N.jsx)(F.a,{value:"circle",children:Object(N.jsx)(T.a,{})}),Object(N.jsx)(F.a,{value:"tag",children:Object(N.jsx)(D.a,{})})]})},E=n(218),W=n(203),I=n(220),P=n(219),A=n(216),L=n(217),_=n(227),B=n(207),H=n(91),R=n.n(H),J=Object(h.a)({list:{}});var U=function(e){var t=e.items,n=e.setItems,a=J();return Object(N.jsx)(N.Fragment,{children:Object(N.jsxs)(A.a,{sx:{maxWidth:345},children:[Object(N.jsx)(L.a,{children:Object(N.jsx)(E.a,{className:a.list,subheader:Object(N.jsx)(P.a,{component:"div",children:"Navigation items"}),children:t.map((function(e){return Object(N.jsx)(W.a,{secondaryAction:Object(N.jsx)(O.a,{onClick:function(){return a=e,void n(t.filter((function(e){return e!==a})));var a},children:Object(N.jsx)(R.a,{})}),children:Object(N.jsx)(I.a,{primary:e.description})},e.id)}))})}),Object(N.jsx)(_.a,{children:Object(N.jsx)(B.a,{size:"small",color:"primary",onClick:function(){n([])},children:"Clear"})})]})})},X=n(15),Y=n(198),q=n(221),z=n(224),G=n(222),K=n(223),Q=n(196),V=1,Z=function(){return V++},$=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"],ee={inProgress:{line1:{width:5,stroke:"#00000033",dash:[15,5]},line2:{width:5,stroke:"#FFFFFFDD",dash:[15,5]},showLength:!0,showDirection:!0},default:{line1:{width:5,stroke:"#00000033",dash:[]},line2:{width:5,stroke:"#FFFFFFDD",dash:[]},showLength:!0,showDirection:!1}},te={inProgress:{line1:{width:5,stroke:"#00000033",dash:[15,5]},line2:{width:5,stroke:"#FFFFFFDD",dash:[15,5]},showLength:!0},default:{line1:{width:5,stroke:"#00000033",dash:[]},line2:{width:5,stroke:"#FFFFFFDD",dash:[]},showLength:!0}},ne=function(e,t,n){return{id:Z(),description:se(e,t,n),type:"line",start:t,end:n,style:ee.default}},ae=function(e,t,n){return{id:Z(),description:oe(e,t,n),type:"circle",start:t,end:n,style:te.default}},ie=function(e,t){var n=t[0]-e[0],a=t[1]-e[1],i=Math.round(Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))),c="",r="";if(i>1){var s=n/i,o=(360+Math.round(360*Math.asin(s)/(2*Math.PI)))%360;if(90===o||270===o){var l=a/i;o=(360+Math.round(360*Math.acos(l)/(2*Math.PI)))%360}var d=(o+180)%360;c=o+"\xb0 ("+re(o)+")",r=d+"\xb0 ("+re(d)+")"}return{dx:n,dy:a,length:i,mid:[e[0]+Math.round(n/2),e[1]+Math.round(a/2)],angleText:c,reciprocalAngleText:r}},ce=function(e,t,n){e.font="16px Arial";var a=e.measureText(n);e.fillStyle="#00000066",e.fillRect(t[0]-a.width/2-5,t[1]-18,a.width+10,26),e.fillStyle="#FFFFFFDD",e.fillText(n,t[0]-a.width/2,t[1])},re=function(e){e=(e+11.25)%360;var t=Math.floor(e/22.5);return $[t]},se=function(e,t,n){var a=ie(t,n),i=a.length,c=a.angleText;return"".concat(Math.round(i*e.scale)," nm line at ").concat(c)},oe=function(e,t,n){var a=ie(t,n).length;return"".concat(Math.round(a*e.scale)," nm circle")},le=function(e,t){e.lineWidth=t.width,e.strokeStyle=t.stroke,e.setLineDash(t.dash)},de=function(e,t,n,a,i){var c=ie(n,a),r=c.length,s=c.mid,o=c.angleText,l=c.reciprocalAngleText;i.line1&&(le(e,i.line1),e.beginPath(),e.moveTo(n[0],n[1]),e.lineTo(a[0],a[1]),e.stroke()),i.line2&&(le(e,i.line2),e.beginPath(),e.moveTo(n[0],n[1]),e.lineTo(a[0],a[1]),e.stroke()),r>40&&i.showDirection&&(ce(e,[n[0]+20,n[1]+20],l),ce(e,[a[0]+30,a[1]+30],o)),i.showLength&&ce(e,s,Math.round(r*t.scale)+" nm")},he=function(e,t,n,a,i){var c=ie(n,a).length;le(e,i.line1),e.beginPath(),e.arc(n[0],n[1],c,0,2*Math.PI),e.stroke(),le(e,i.line2),e.beginPath(),e.arc(n[0],n[1],c,0,2*Math.PI),e.stroke(),de(e,t,n,a,i)},ue=function(e,t,n){ce(e,[t[0]+20,t[1]+20],n)},je=function(e,t,n,a,i,c){e&&(e.clearRect(0,0,e.canvas.width,e.canvas.height),e.drawImage(t.image,0,0,t.naturalWidth,t.naturalHeight,0,0,t.scaledWidth,t.scaledHeight),a&&function(e,t){e.lineWidth=2,e.strokeStyle="#FFFFFF33",e.setLineDash([1]),e.beginPath(),e.moveTo(0,t[1]),e.lineTo(1e3,t[1]),e.moveTo(t[0],0),e.lineTo(t[0],1e3),e.stroke()}(e,a),n&&a&&("line"===c?de(e,t,n,a,ee.inProgress):"circle"===c&&he(e,t,n,a,te.inProgress)),function(e,t,n){if(n){var a,i=Object(l.a)(n);try{for(i.s();!(a=i.n()).done;){var c=a.value;"line"===c.type?de(e,t,c.start,c.end,c.style):"circle"===c.type?he(e,t,c.start,c.end,c.style):"tag"===c.type&&ue(e,c.location,c.text)}}catch(r){i.e(r)}finally{i.f()}}}(e,t,i))},fe=Object(h.a)({root:{},canvas:{maxWidth:"100%"}}),be=function(e,t){return[].concat(Object(X.a)(e),[t])},me=function(e,t){if(!e)return t;var n=e.getBoundingClientRect(),a=e.width/n.width,i=e.height/n.height;return[parseFloat((t[0]*a).toFixed(3)),parseFloat((t[1]*i).toFixed(3))]};var ve=function(e){var t=e.drawTool,n=e.map,i=e.items,c=e.setItems,r=fe(),s=Object(a.useRef)(null),l=Object(a.useState)(null),d=Object(o.a)(l,2),h=d[0],u=d[1],j=Object(a.useState)(null),f=Object(o.a)(j,2),b=f[0],m=f[1],v=Object(a.useState)(null),g=Object(o.a)(v,2),O=g[0],p=g[1],x=Object(a.useState)(!1),F=Object(o.a)(x,2),w=F[0],y=F[1],T=Object(a.useState)(null),k=Object(o.a)(T,2),S=k[0],M=k[1],D=Object(a.useState)(""),C=Object(o.a)(D,2),E=C[0],W=C[1],I=function(e,a,i){je(b,n,e,a,i,t)};Object(a.useEffect)((function(){I(null,null,i)}),[n,i,h,b]),Object(a.useEffect)((function(){setTimeout((function(){u(s.current),m(s.current.getContext("2d"))}),200)}),[]);var P=function(){y(!1)};return Object(N.jsxs)("div",{className:r.root,children:[Object(N.jsx)("canvas",{ref:s,width:1e3,height:1e3,onClick:function(e){var a=me(h,[e.nativeEvent.offsetX,e.nativeEvent.offsetY]);if("tag"===t)return M(a),void y(!0);var r=O?null:a,s=O?be(i,function(e,t,n,a){return"line"===t?ne(e,n,a):"circle"===t?ae(e,n,a):void 0}(n,t,O,a)):i;p(r),s!==i&&c(s),h&&I(r,a,s)},onMouseMove:function(e){var t=me(h,[e.nativeEvent.offsetX,e.nativeEvent.offsetY]);h&&I(O,t,i)},onMouseLeave:function(){I(null,null,i)},className:r.canvas}),Object(N.jsxs)(q.a,{open:w,onClose:P,children:[Object(N.jsx)(Q.a,{children:"Add tag"}),Object(N.jsxs)(G.a,{children:[Object(N.jsx)(K.a,{children:"Type in the text for the tag you would like to appear on the map:"}),Object(N.jsx)(Y.a,{autoFocus:!0,margin:"dense",id:"text",label:"Tag text",type:"text",fullWidth:!0,variant:"standard",value:E,onChange:function(e){W(e.target.value)},inputProps:{autoComplete:"off"}})]}),Object(N.jsxs)(z.a,{children:[Object(N.jsx)(B.a,{onClick:P,children:"Cancel"}),Object(N.jsx)(B.a,{onClick:function(){var e,t,n=(e=S,t=E,{id:Z(),description:'Tag "'.concat(t.substring(0,20)).concat(t.length>20?"...":"",'"'),type:"tag",location:e,text:t});c(be(i,n)),y(!1),W("")},disabled:!E||0===E.trim().length,children:"Add"})]})]})]})},ge=n.p+"static/media/map_final_al_ankh.70de4685.jpg",Oe=n.p+"static/media/map_final_emerald_archipelago.2f524505.jpg",pe=n.p+"static/media/map_final_aestrin.9651b847.jpg",xe=n.p+"static/media/map_final_ocean.917e93d6.jpg",Fe=[],we=function(e,t){var n=new Image;return n.src=t,n.onload=function(){var t=n.naturalWidth,a=1;t>1e3&&(a=1e3/t);var i=n.naturalHeight,c=1;i>1e3&&(c=1e3/i);var r=Math.min(a,c);r<1&&(t*=r,i*=r);var s=Fe.find((function(t){return t.name===e}));s.naturalWidth=n.naturalWidth,s.naturalHeight=n.naturalHeight,s.scaledWidth=t,s.scaledHeight=i},n},ye=function(e,t,n){return{name:e,image:we(e,t),scale:n,items:[]}};Fe.push(ye("Al'Ankh",ge,84/850)),Fe.push(ye("Emerald Archipelago",Oe,111/920)),Fe.push(ye("Aestrin",pe,60/585)),Fe.push(ye("Ocean",xe,891/846));var Te=Fe,ke=n(75),Se=n.n(ke),Me=Object(h.a)({container:{paddingTop:64}});var De=function(){var e=Me(),t=Object(d.f)(),n=Object(a.useState)(function(){var e,t={isDefault:!0,maps:{}},n=Object(l.a)(Te);try{for(n.s();!(e=n.n()).done;){var a=e.value;t.maps[a.name]=[]}}catch(i){n.e(i)}finally{n.f()}return t}()),i=Object(o.a)(n,2),c=i[0],r=i[1],h=Object(a.useState)("line"),p=Object(o.a)(h,2),F=p[0],w=p[1],y=function(e,t){var n=window.location.search,a=new URLSearchParams(n);if(!n||n.length<3||!a.get("map"))return{mapName:"Al'Ankh",data:null,tabIndex:0,state:null};var i=a.get("map"),c=a.get("data");return{mapName:i,tabIndex:Te.findIndex((function(e){return e.name===i})),data:c,state:t}}(Object(d.g)()["*"],c),T=y.tabIndex;Object(a.useEffect)((function(){y.data&&y.data.trim().length>0&&Se.a.loadAsync(y.data,{base64:!0}).then((function(e){e.files["state.json"].async("string").then((function(e){var t=JSON.parse(e),n=0;for(var a in t.maps){var i,c=t.maps[a],s=Object(l.a)(c);try{for(s.s();!(i=s.n()).done;){var o=i.value;o.id>n&&(n=o.id)}}catch(d){s.e(d)}finally{s.f()}}V=n+1,r(t)}))}))}),[]);var k=function(e,n){t(n?"?map=".concat(e,"&data=").concat(encodeURIComponent(n)):"?map=".concat(e))},S=c.maps[y.mapName],M=function(e){var t=Object(s.a)({},c);t.maps[y.mapName]=e,t.isDefault=!1;var n=0;for(var a in t.maps)n+=t.maps[a].length;if(0===n)k(Te[T].name);else{var i=new Se.a;i.file("state.json",JSON.stringify(t)),i.generateAsync({type:"base64",compression:"DEFLATE",compressionOptions:{level:9}}).then((function(e){k(Te[T].name,e)}))}};return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("header",{children:Object(N.jsx)(v.a,{children:Object(N.jsxs)(g.a,{children:[Object(N.jsx)(O.a,{edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2},children:Object(N.jsx)(x.a,{})}),"Sailwind Navigation Companion"]})})}),Object(N.jsxs)(j.a,{className:e.container,children:[Object(N.jsx)(m.a,{sx:{borderBottom:1,borderColor:"divider",marginBottom:1},children:Object(N.jsx)(f.a,{value:T,onChange:function(e,t){k(Te[t].name,y.data)},children:Te.map((function(e){return Object(N.jsx)(b.a,{label:e.name},e.name)}))})}),Object(N.jsx)(m.a,{sx:{marginBottom:1},children:Object(N.jsx)(C,{drawTool:F,setDrawTool:w})}),Object(N.jsxs)(u.a,{container:!0,spacing:1,children:[Object(N.jsx)(u.a,{item:!0,xs:8,children:Object(N.jsx)(ve,{drawTool:F,items:S,setItems:M,map:Te[T]})}),Object(N.jsx)(u.a,{item:!0,xs:4,children:Object(N.jsx)(U,{items:S,setItems:M})})]})]})]})},Ne=n(70);var Ce=function(){return Object(N.jsx)("div",{style:{width:"100%",height:"100%"},children:Object(N.jsx)(Ne.a,{basename:"/sailwind-companion",children:Object(N.jsx)(d.c,{children:Object(N.jsx)(d.a,{index:!0,path:"*",element:Object(N.jsx)(De,{})})})})})},Ee=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,228)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),i(e),c(e),r(e)}))};r.a.render(Object(N.jsx)(i.a.StrictMode,{children:Object(N.jsx)(Ce,{})}),document.getElementById("root")),Ee()}},[[128,1,2]]]);
//# sourceMappingURL=main.5ef35ead.chunk.js.map