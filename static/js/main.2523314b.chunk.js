(this.webpackJsonpreactcanvas=this.webpackJsonpreactcanvas||[]).push([[0],{113:function(e,t,n){},114:function(e,t,n){},128:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),c=n(34),r=n.n(c),s=(n(113),n(114),n(83)),o=n(13),l=n(39),d=n(14),u=n(199),h=n(205),j=n(212),f=n(200),b=n(214),m=n(213),v=n(210),g=n(211),O=n(209),p=n(92),x=n.n(p),F=n(215),S=n(206),w=n(89),N=n.n(w),E=n(88),W=n.n(E),y=n(90),T=n.n(y),k=n(2),D=function(e){var t=e.drawTool,n=e.setDrawTool;return Object(k.jsxs)(S.a,{value:t,exclusive:!0,onChange:function(e,t){n(t)},children:[Object(k.jsx)(F.a,{value:"line",children:Object(k.jsx)(W.a,{})}),Object(k.jsx)(F.a,{value:"circle",children:Object(k.jsx)(N.a,{})}),Object(k.jsx)(F.a,{value:"tag",children:Object(k.jsx)(T.a,{})})]})},M=n(218),C=n(203),I=n(220),P=n(219),A=n(216),L=n(217),_=n(227),B=n(207),H=n(91),R=n.n(H),J=Object(u.a)({list:{}});var U=function(e){var t=e.items,n=e.setItems,a=J();return Object(k.jsx)(k.Fragment,{children:Object(k.jsxs)(A.a,{sx:{maxWidth:345},children:[Object(k.jsx)(L.a,{children:Object(k.jsx)(M.a,{className:a.list,subheader:Object(k.jsx)(P.a,{component:"div",children:"Navigation items"}),children:t.map((function(e){return Object(k.jsx)(C.a,{secondaryAction:Object(k.jsx)(O.a,{onClick:function(){return a=e,void n(t.filter((function(e){return e!==a})));var a},children:Object(k.jsx)(R.a,{})}),children:Object(k.jsx)(I.a,{primary:e.description})},e.id)}))})}),Object(k.jsx)(_.a,{children:Object(k.jsx)(B.a,{size:"small",color:"primary",onClick:function(){n([])},children:"Clear"})})]})})},X=n(15),Y=n(198),q=n(221),z=n(224),G=n(222),K=n(223),Q=n(196),V=1,Z=function(){return V++},$=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"],ee=["N","NbE","NNE","NEbN","NE","NEbE","ENE","EbN","E","EbS","ESE","SEbE","SE","SEbS","SSE","SbE","S","SbW","SSW","SWbS","SW","SWbW","WSW","WbS","W","WbN","WNW","NWbW","NW","NWbN","NNW","NbW"],te="16",ne="32",ae={inProgress:{line1:{width:5,stroke:"#00000033",dash:[15,5]},line2:{width:5,stroke:"#FFFFFFDD",dash:[15,5]},showLength:!0,showDirection:!0},default:{line1:{width:5,stroke:"#00000033",dash:[]},line2:{width:5,stroke:"#FFFFFFDD",dash:[]},showLength:!0,showDirection:!1}},ie={inProgress:{line1:{width:5,stroke:"#00000033",dash:[15,5]},line2:{width:5,stroke:"#FFFFFFDD",dash:[15,5]},showLength:!0},default:{line1:{width:5,stroke:"#00000033",dash:[]},line2:{width:5,stroke:"#FFFFFFDD",dash:[]},showLength:!0}},ce=function(e,t,n){return{id:Z(),description:de(e,t,n),type:"line",start:t,end:n,style:ae.default}},re=function(e,t,n){return{id:Z(),description:ue(e,t,n),type:"circle",start:t,end:n,style:ie.default}},se=function(e,t){var n=t[0]-e[0],a=t[1]-e[1],i=Math.round(Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))),c="",r="";if(i>1){var s=n/i,o=(360+Math.round(360*Math.asin(s)/(2*Math.PI)))%360;isNaN(o)?o=t[0]>e[0]?90:270:e[0]<t[0]&&e[1]<t[1]?o=180-o:e[0]>t[0]&&e[1]<t[1]&&(o=270-(o-270));var l=(o+180)%360;c=o+"\xb0 ("+le(o,te)+")",r=l+"\xb0 ("+le(l,te)+")"}return{dx:n,dy:a,length:i,mid:[e[0]+Math.round(n/2),e[1]+Math.round(a/2)],angleText:c,reciprocalAngleText:r}},oe=function(e,t,n){e.font="16px Arial";var a=e.measureText(n);e.fillStyle="#00000066",e.fillRect(t[0]-a.width/2-5,t[1]-18,a.width+10,26),e.fillStyle="#FFFFFFDD",e.fillText(n,t[0]-a.width/2,t[1])},le=function(e,t){if(t===te){e=(e+11.25)%360;var n=Math.floor(e/22.5);return $[n]}if(t===ne){e=(e+5.625)%360;var a=Math.floor(e/11.25);return ee[a]}return""},de=function(e,t,n){var a=se(t,n),i=a.length,c=a.angleText;return"".concat(Math.round(i*e.scale)," nm line at ").concat(c)},ue=function(e,t,n){var a=se(t,n).length;return"".concat(Math.round(a*e.scale)," nm circle")},he=function(e,t){e.lineWidth=t.width,e.strokeStyle=t.stroke,e.setLineDash(t.dash)},je=function(e,t,n,a,i){var c=se(n,a),r=c.length,s=c.mid,o=c.angleText,l=c.reciprocalAngleText;i.line1&&(he(e,i.line1),e.beginPath(),e.moveTo(n[0],n[1]),e.lineTo(a[0],a[1]),e.stroke()),i.line2&&(he(e,i.line2),e.beginPath(),e.moveTo(n[0],n[1]),e.lineTo(a[0],a[1]),e.stroke()),r>40&&i.showDirection&&(oe(e,[n[0]+20,n[1]+20],l),oe(e,[a[0]+30,a[1]+30],o)),i.showLength&&oe(e,s,Math.round(r*t.scale)+" nm")},fe=function(e,t,n,a,i){var c=se(n,a).length;he(e,i.line1),e.beginPath(),e.arc(n[0],n[1],c,0,2*Math.PI),e.stroke(),he(e,i.line2),e.beginPath(),e.arc(n[0],n[1],c,0,2*Math.PI),e.stroke(),je(e,t,n,a,i)},be=function(e,t,n){oe(e,[t[0]+20,t[1]+20],n)},me=function(e,t,n,a,i,c){e&&(e.clearRect(0,0,e.canvas.width,e.canvas.height),e.drawImage(t.image,0,0,t.naturalWidth,t.naturalHeight,0,0,t.scaledWidth,t.scaledHeight),a&&function(e,t){e.lineWidth=2,e.strokeStyle="#FFFFFF33",e.setLineDash([1]),e.beginPath(),e.moveTo(0,t[1]),e.lineTo(1e3,t[1]),e.moveTo(t[0],0),e.lineTo(t[0],1e3),e.stroke()}(e,a),n&&a&&("line"===c?je(e,t,n,a,ae.inProgress):"circle"===c&&fe(e,t,n,a,ie.inProgress)),function(e,t,n){if(n){var a,i=Object(l.a)(n);try{for(i.s();!(a=i.n()).done;){var c=a.value;"line"===c.type?je(e,t,c.start,c.end,c.style):"circle"===c.type?fe(e,t,c.start,c.end,c.style):"tag"===c.type&&be(e,c.location,c.text)}}catch(r){i.e(r)}finally{i.f()}}}(e,t,i))},ve=Object(u.a)({root:{},canvas:{maxWidth:"100%"}}),ge=function(e,t){return[].concat(Object(X.a)(e),[t])},Oe=function(e,t){if(!e)return t;var n=e.getBoundingClientRect(),a=e.width/n.width,i=e.height/n.height;return[parseFloat((t[0]*a).toFixed(3)),parseFloat((t[1]*i).toFixed(3))]};var pe=function(e){var t=e.drawTool,n=e.map,i=e.items,c=e.setItems,r=ve(),s=Object(a.useRef)(null),l=Object(a.useState)(null),d=Object(o.a)(l,2),u=d[0],h=d[1],j=Object(a.useState)(null),f=Object(o.a)(j,2),b=f[0],m=f[1],v=Object(a.useState)(null),g=Object(o.a)(v,2),O=g[0],p=g[1],x=Object(a.useState)(!1),F=Object(o.a)(x,2),S=F[0],w=F[1],N=Object(a.useState)(null),E=Object(o.a)(N,2),W=E[0],y=E[1],T=Object(a.useState)(""),D=Object(o.a)(T,2),M=D[0],C=D[1],I=function(e,a,i){me(b,n,e,a,i,t)};Object(a.useEffect)((function(){I(null,null,i)}),[n,i,u,b]),Object(a.useEffect)((function(){setTimeout((function(){h(s.current),m(s.current.getContext("2d"))}),200)}),[]);var P=function(){w(!1)};return Object(k.jsxs)("div",{className:r.root,children:[Object(k.jsx)("canvas",{ref:s,width:1e3,height:1e3,onClick:function(e){var a=Oe(u,[e.nativeEvent.offsetX,e.nativeEvent.offsetY]);if("tag"===t)return y(a),void w(!0);var r=O?null:a,s=O?ge(i,function(e,t,n,a){return"line"===t?ce(e,n,a):"circle"===t?re(e,n,a):void 0}(n,t,O,a)):i;p(r),s!==i&&c(s),u&&I(r,a,s)},onMouseMove:function(e){var t=Oe(u,[e.nativeEvent.offsetX,e.nativeEvent.offsetY]);u&&I(O,t,i)},onMouseLeave:function(){I(null,null,i)},className:r.canvas}),Object(k.jsxs)(q.a,{open:S,onClose:P,children:[Object(k.jsx)(Q.a,{children:"Add tag"}),Object(k.jsxs)(G.a,{children:[Object(k.jsx)(K.a,{children:"Type in the text for the tag you would like to appear on the map:"}),Object(k.jsx)(Y.a,{autoFocus:!0,margin:"dense",id:"text",label:"Tag text",type:"text",fullWidth:!0,variant:"standard",value:M,onChange:function(e){C(e.target.value)},inputProps:{autoComplete:"off"}})]}),Object(k.jsxs)(z.a,{children:[Object(k.jsx)(B.a,{onClick:P,children:"Cancel"}),Object(k.jsx)(B.a,{onClick:function(){var e,t,n=(e=W,t=M,{id:Z(),description:'Tag "'.concat(t.substring(0,20)).concat(t.length>20?"...":"",'"'),type:"tag",location:e,text:t});c(ge(i,n)),w(!1),C("")},disabled:!M||0===M.trim().length,children:"Add"})]})]})]})},xe=n.p+"static/media/map_final_al_ankh.70de4685.jpg",Fe=n.p+"static/media/map_final_emerald_archipelago.2f524505.jpg",Se=n.p+"static/media/map_final_aestrin.9651b847.jpg",we=n.p+"static/media/map_final_ocean.917e93d6.jpg",Ne=[],Ee=function(e,t){var n=new Image;return n.src=t,n.onload=function(){var t=n.naturalWidth,a=1;t>1e3&&(a=1e3/t);var i=n.naturalHeight,c=1;i>1e3&&(c=1e3/i);var r=Math.min(a,c);r<1&&(t*=r,i*=r);var s=Ne.find((function(t){return t.name===e}));s.naturalWidth=n.naturalWidth,s.naturalHeight=n.naturalHeight,s.scaledWidth=t,s.scaledHeight=i},n},We=function(e,t,n){return{name:e,image:Ee(e,t),scale:n,items:[]}};Ne.push(We("Al'Ankh",xe,84/850)),Ne.push(We("Emerald Archipelago",Fe,111/920)),Ne.push(We("Aestrin",Se,60/585)),Ne.push(We("Ocean",we,891/846));var ye=Ne,Te=n(75),ke=n.n(Te),De=Object(u.a)({container:{paddingTop:64}});var Me=function(){var e=De(),t=Object(d.f)(),n=Object(a.useState)(function(){var e,t={isDefault:!0,maps:{}},n=Object(l.a)(ye);try{for(n.s();!(e=n.n()).done;){var a=e.value;t.maps[a.name]=[]}}catch(i){n.e(i)}finally{n.f()}return t}()),i=Object(o.a)(n,2),c=i[0],r=i[1],u=Object(a.useState)("line"),p=Object(o.a)(u,2),F=p[0],S=p[1],w=function(e,t){var n=window.location.search,a=new URLSearchParams(n);if(!n||n.length<3||!a.get("map"))return{mapName:"Al'Ankh",data:null,tabIndex:0,state:null};var i=a.get("map"),c=a.get("data");return{mapName:i,tabIndex:ye.findIndex((function(e){return e.name===i})),data:c,state:t}}(Object(d.g)()["*"],c),N=w.tabIndex;Object(a.useEffect)((function(){w.data&&w.data.trim().length>0&&ke.a.loadAsync(w.data,{base64:!0}).then((function(e){e.files["state.json"].async("string").then((function(e){var t=JSON.parse(e),n=0;for(var a in t.maps){var i,c=t.maps[a],s=Object(l.a)(c);try{for(s.s();!(i=s.n()).done;){var o=i.value;o.id>n&&(n=o.id)}}catch(d){s.e(d)}finally{s.f()}}V=n+1,r(t)}))}))}),[]);var E=function(e,n){t(n?"?map=".concat(e,"&data=").concat(encodeURIComponent(n)):"?map=".concat(e))},W=c.maps[w.mapName],y=function(e){var t=Object(s.a)({},c);t.maps[w.mapName]=e,t.isDefault=!1;var n=0;for(var a in t.maps)n+=t.maps[a].length;if(0===n)E(ye[N].name);else{var i=new ke.a;i.file("state.json",JSON.stringify(t)),i.generateAsync({type:"base64",compression:"DEFLATE",compressionOptions:{level:9}}).then((function(e){E(ye[N].name,e)}))}};return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("header",{children:Object(k.jsx)(v.a,{children:Object(k.jsxs)(g.a,{children:[Object(k.jsx)(O.a,{edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2},children:Object(k.jsx)(x.a,{})}),"Sailwind Navigation Companion"]})})}),Object(k.jsxs)(j.a,{className:e.container,children:[Object(k.jsx)(m.a,{sx:{borderBottom:1,borderColor:"divider",marginBottom:1},children:Object(k.jsx)(f.a,{value:N,onChange:function(e,t){E(ye[t].name,w.data)},children:ye.map((function(e){return Object(k.jsx)(b.a,{label:e.name},e.name)}))})}),Object(k.jsx)(m.a,{sx:{marginBottom:1},children:Object(k.jsx)(D,{drawTool:F,setDrawTool:S})}),Object(k.jsxs)(h.a,{container:!0,spacing:1,children:[Object(k.jsx)(h.a,{item:!0,xs:8,children:Object(k.jsx)(pe,{drawTool:F,items:W,setItems:y,map:ye[N]})}),Object(k.jsx)(h.a,{item:!0,xs:4,children:Object(k.jsx)(U,{items:W,setItems:y})})]})]})]})},Ce=n(70);var Ie=function(){return Object(k.jsx)("div",{style:{width:"100%",height:"100%"},children:Object(k.jsx)(Ce.a,{basename:"/sailwind-companion",children:Object(k.jsx)(d.c,{children:Object(k.jsx)(d.a,{index:!0,path:"*",element:Object(k.jsx)(Me,{})})})})})},Pe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,228)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),i(e),c(e),r(e)}))};r.a.render(Object(k.jsx)(i.a.StrictMode,{children:Object(k.jsx)(Ie,{})}),document.getElementById("root")),Pe()}},[[128,1,2]]]);
//# sourceMappingURL=main.2523314b.chunk.js.map